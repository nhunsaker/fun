<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>FUN.2024</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js"></script>
</head>
<body>

<nav class="navbar navbar-expand-lg bg-primary" data-bs-theme="dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">üêΩüí∞</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="#">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Link</a>
        </li>
      </ul>
    </div>
  </div>
</nav>	

<!-- // Errors -->
<div class="alert alert-danger d-none" role="alert" id="errorMessage"></div>


<!-- // Start import/export form -->
<div class="container-fluid">
<form class="p-4 m-4 border rounded-4">
  <fieldset>
    <legend>Import/Export</legend>
<div class="grid mb-3">
<div class="mb-2 g-col-12">
  	<label for="categoryData" class="form-label">Categories</label>
	<textarea class="form-control" id="categoryData" rows="3" name="categoryData"></textarea>
</div>
<div class="mb-2 g-col-12">
  	<label for="sourceData" class="form-label">Sources</label>
	<textarea class="form-control" id="sourceData" rows="3" name="sourceData"></textarea>
</div>
<div class="mb-2 g-col-12">
  	<label for="budgetData" class="form-label">Budgets</label>
	<textarea class="form-control" id="budgetData" rows="3" name="budgetData"></textarea>
</div>
<div class="mb-2 g-col-12">
  	<label for="transactionData" class="form-label">Transactions</label>
	<textarea class="form-control" id="transactionData" rows="3" name="transactionData"></textarea>
</div>
<div class="row">
<div class="mt-2 col-6">
  	<button id="import" type="button" class="btn btn-primary mt-2">Import</button>
</div>
<div class="mt-2 col-6 align-right">
	<button type="button" class="btn btn-danger mt-2" id="resetCookies">Reset</button>
</div>
</div>

</div>
  </fieldset>
</form>
</div>
<!-- // End edit form -->


<!-- // Start edit form -->
<div class="container-fluid">
<form class="p-4 m-4 border rounded-4">
  <fieldset>
    <legend>Add</legend>
<div class="grid mb-3">

<div class="mb-2 g-col-12 lg-col-3">
  	<label for="description" class="form-label">Description</label>
	<input type="text" placeholder="description" id="description" name="description" class="form-control"/>
</div>

<div class="mb-2 g-col-12 lg-col-4">
  	<label for="date" class="form-label">Date</label>
	<input type="date" id="date" name="date" class="form-control"/>
</div>

<div class="mb-2 g-col-12 lg-col-4">
  	<label for="date" class="form-label">Amount</label>
  	<div class="input-group">
		<span class="input-group-text">$</span>
		<input type="number" placeholder="00.00" id="amount" name="amount" class="form-control"/>
	</div>
</div>

<div class="mb-2 g-col-12 lg-col-4">
  	<label for="category" class="form-label">Category</label>
<select class="form-select text-capitalize" id="categorySelect">
  <option value="" disabled selected>Select:</option>
</select>
</div>

<div class="mb-2 g-col-12 lg-col-4">
  	<label for="sourceMenu" class="form-label">Source</label>
<select class="form-select text-capitalize" id="sourceSelect">
  <option value="" disabled selected>Select:</option>
</select>
</div>

<div class="form-check">
  <input class="form-check-input" type="checkbox" value="" id="posted">
  <label class="form-check-label" for="posted">
    Posted
  </label>
</div>

<button type="submit" class="btn btn-primary mt-2">Save</button>

</div>
  </fieldset>
</form>
</div>
<!-- // End edit form -->

<div class="m-4">
	<h4 class="text-center">
      Budget
    </h4>
  <div class="row">
    <div class="col-1">
      üõí
    </div>
    <div class="col-11">
      <div class="progress" role="progressbar" aria-label="Success example" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
  <div class="progress-bar bg-success" style="width: 25%">$100/$200</div>
</div>
    </div>
  </div>
  
</div>


<!-- // Start transactions table -->
<h4 class="text-center">
      December 2023
</h4>
<table class="table">
  <thead>
    <tr>
      <th scope="col">Day</th>
      <th scope="col">Desc.</th>
      <th scope="col">Amount</th>
      <th scope="col">Cat</th>
      <th scope="col">Source</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">1</th>
      <td>Amazon</td>
      <td>0.00</td>
      <td>Amazon</td>
      <td>Amex</td>
    </tr>

    <tr>
      <th scope="row">15</th>
      <td>Herbst</td>
      <td>0.00</td>
      <td>Amazon</td>
      <td>Apple Pay</td>
    </tr>

  </tbody>
</table>
<!-- // End transactions table -->



<script>
	// Defaults
	var categories = ['groceries', 'clothing', 'resturants', 'gas', 'other', 'vacation'];
	var sources = ['cash', 'amex', 'apple', 'etrade', 'chase'];
	var budget = [];
	var transactions = [
'12/1/23,Noodles & Co ,-$11.84,Resturants,apple,1',
'12/2/23,Tim Tom,-$2.00,Groceries,apple,1',
'12/2/23,Holister,-$50.00,Gifts,apple,1',
'12/2/23,Caribu,-$18.93,Resturants,apple,1',
'12/2/23,Reuse Center,-$6.00,Other,apple,1',
'12/3/23,Target,-$96.00,Groceries,amex,1',
'12/3/23,Moscow on the Hill,-$65.66,Resturants,amex,1',
'12/7/2023,Domain Transfer,-$21.00,Other,amex,1',
'12/8/2023,Whole Foods via Amazon,-$105.00,Groceries,amex,1',
'12/8/2023,Whole Foods for Meats,-$60.00,Groceries,amex,1',
'12/9/2023,Venmo ,-$25.00,Other,debit,1',
'12/9/2023,Film via Amazon,-$44.00,Other,amex,1',
'12/9/2023,Adobe,$0.00,Other,amex,1',
'12/11/2023,Target,-$21.00,Groceries,apple,1',
'12/14/2023,Target,-$5.00,Groceries,amex,1',
'12/14/2023,Target,-$35.83,Groceries,apple,1',
'12/15/2023,Amazon,$0.00,Amazon,amex,1',
'12/15/2023,Herbst,-$43.89,Gifts,apple,1',
'12/15/2023,Dogwood,-$55.00,Gifts,apple,1',
'12/15/2023,Target,-$70.12,Groceries,apple,1',
'12/15/2023,Target,-$4.41,Groceries,apple,1',
'12/16/2023,Mpls Parking,-$1.25,Other,apple,1',
'12/16/2023,Cardigan Donuts,-$25.00,Resturants,apple,1',
'12/18/2023,Amazon,-$18.34,Amazon,amex,1',
'12/21/2023,Gas,-$36.24,Gas,apple,1'
];

	const populateExport = () => {
			$("#categoryData").val(JSON.stringify(categories));
			$("#sourceData").val(JSON.stringify(sources));
			$("#budgetData").val(JSON.stringify(budget));
			$("#transactionData").val(JSON.stringify(transactions));
	};
	$("#import").click(function() {
			categories = JSON.parse($("#categoryData").val());
			sources = JSON.parse($("#sourceData").val());
			budget = JSON.parse($("#budgetData").val());
			transactions = JSON.parse($("#transactionData").val());
			Cookies.set('categories', JSON.stringify(categories));
			Cookies.set('sources', JSON.stringify(sources));
			Cookies.set('budget', JSON.stringify(budget));
			Cookies.set('transactions', JSON.stringify(transactions));
			$("#import").addClass("disabled");
	});

	$("#resetCookies").click(function() {
		Cookies.remove('categories');
		Cookies.remove('sources');
		Cookies.remove('budget');
		Cookies.remove('transactions');
		location.reload();
	});

    $( document ).ready(function() {
    	// Load the cookie data
    	if (!Cookies.get('categories')) {
			console.error('Setting categories default cookie');
			Cookies.set('categories', JSON.stringify(categories));
    	}
    	if (!Cookies.get('sources')) {
			console.error('Setting sources default cookie');
			Cookies.set('sources', JSON.stringify(sources));
    	}
    	if (!Cookies.get('budget')) {
			console.error('Setting budget default cookie');
			Cookies.set('budget', JSON.stringify(budget));
    	}
    	if (!Cookies.get('transactions')) {
			console.error('Setting transactions default cookie');
			Cookies.set('transactions', JSON.stringify(transactions));
    	}
		// If you can't access any cookies
		if (!Cookies.get('categories') && !Cookies.get('sources') && !Cookies.get('transactions')) {
			$("#errorMessage").removeClass('d-none').text('Unable to read/save cookies.');
		} else {
			categories = JSON.parse(Cookies.get('categories'));
			sources = JSON.parse(Cookies.get('sources'));
			budget = JSON.parse(Cookies.get('budget'));
			transactions = JSON.parse(Cookies.get('transactions'));
			console.error('Decode categories', categories);
			console.error('Decode sources', sources);
			console.error('Decode budget', budget);
			console.error('Decode transactions', transactions);
		}
		populateExport();
		

    	// Set the edit form options
	var categorySelect = $("#categorySelect");
	$.each(categories, function(index, value) {
    	categorySelect.append($("<option></option>").val(value).text(value));
	});
	var sourceSelect = $("#sourceSelect");
	$.each(sources, function(index, value) {
    	sourceSelect.append($("<option></option>").val(value).text(value));
	});
    });
 
   
</script>


</body>
</html>
